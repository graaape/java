# 笔记 Day 7
## 尚硅谷Java入门 p427~446
### 程序
- 是为完成特定任务、用某种语言编写的一组指令的集合，即指一段**静态的代码**。
### 进程
- 是程序的一次执行过程，或是正在运行的一个程序。
### 线程
- 进程可进一步细化为线程，是一个程序内部的一条执行路径。
- 每个线程拥有自己独立的栈和程序计数器。
- 多个线程共享同一个进程中的结构：方法区、堆。
### 并行
- 多个CPU同时执行多个任务。
### 并发
- 一个CPU（采用时间片）同时执行多个任务。
### 线程的生命周期
 Java语言使用Thread类及其子类的对象来表示线程，在它 的一个完整生命周期中通常要经历以下**五种**状态：
 
- **新建**：当一个Thread类或其子类的对象被声明并创建时，新生的线程对象处于新建状态。
- **就绪**：处于新建状态的线程被start()后，将进入线程队列等待CPU时间片，此时它已具备了运行的条件，只是没分配到CPU资源。
- **运行**：当就绪的线程被调度并获得CPU资源时，便进入运行状态。run()方法定义了线程的操作和功能。
- **阻塞**：在某种特殊情况下，被人为挂起或执行输入输出操作时，让出CPU并临时中止自己的执行，进入阻塞状态。
- **死亡**：线程完成了它的全部工作或线程被提前强制性地中止或出现异常导致结束。
### 死锁问题
- #### 死锁
	- 不同的线程分别占用对方需要的同步资源不放弃，都在等待对方放弃自己需要的同步资源，就形成了线程的死锁。
	- 出现死锁后，不会出现异常，不会出现提示，只是所有的线程都处于阻塞状态，无法继续。
- #### 解决方法
	- 专门的算法、原则。
	- 尽量减少同步资源的定义。
	- 尽量避免嵌套同步。
### synchronized与lock的对比
1. lock是显式锁，需要手动开启和关闭；synchronized是隐式锁，出了作用域自动释放。
2. lock只有代码块锁，synchronized有代码块锁和方法锁。
3. 使用lock锁，JVM将花费较少的时间来调度线程，性能更好，并且具有更好的拓展性（提供更多子类）。
4. 建议优先使用顺序：lock-->同步代码块-->同步方法。
### 线程池
- **背景**：经常创建和销毁、使用量特别大的资源，比如并发情况下的线程，对性能影响很大。
- **思路**：提前创建好多个线程，放入线程池中，使用时直接获取，使用完放回池中。可以避免频繁创建销毁、实现重复利用。
- **好处**：

	- 提高响应速度（减少了创建新线程的时间）。
	- 降低资源消耗（重复利用线程池中的线程，不需要每次都创建）。
	- 便于线程管理。

